<%- include('partials/header', { title: 'Welcomer Settings - ' + guild.name, guild: guild, page: 'welcomer' }) %>
    <%- include('partials/sidebar') %>
        <main class="content">
            <div class="container-fluid">
                <h3 class="fw-bold text-white mb-4">Pengaturan Welcomer</h3>
                <% if (query.success==='true' ) { %>
                    <div class="alert alert-success">Pengaturan berhasil disimpan!</div>
                    <% } %>

                        <form action="/dashboard/<%= guild.id %>/welcomer" method="POST">
                            <div class="card glass-effect mb-4" style="border-radius: 1rem;">
                                <div class="card-body p-4">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="welcomeInChannelId" class="form-label">Channel Pesan
                                                Masuk</label>
                                            <select class="form-select" id="welcomeInChannelId"
                                                name="welcomeInChannelId">
                                                <option value="">Tidak Diatur</option>
                                                <% channels.text.forEach(channel=> { %>
                                                    <option value="<%= channel.id %>"
                                                        <%=settings.welcomeInChannelId===channel.id ? 'selected' : '' %>
                                                        >#<%= channel.name %>
                                                    </option>
                                                    <% }) %>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="welcomeOutChannelId" class="form-label">Channel Pesan
                                                Keluar</label>
                                            <select class="form-select" id="welcomeOutChannelId"
                                                name="welcomeOutChannelId">
                                                <option value="">Tidak Diatur</option>
                                                <% channels.text.forEach(channel=> { %>
                                                    <option value="<%= channel.id %>"
                                                        <%=settings.welcomeOutChannelId===channel.id ? 'selected' : ''
                                                        %> >#<%= channel.name %>
                                                    </option>
                                                    <% }) %>
                                            </select>
                                        </div>
                                        <div class="col-12">
                                            <label for="welcomeInText" class="form-label">Teks Pesan Masuk</label>
                                            <textarea class="form-control" name="welcomeInText" id="welcomeInText"
                                                rows="3"><%= settings.welcomeInText || '' %></textarea>
                                            <div class="form-text">Variabel: {user}, {username}, {server}, {memberCount}
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <label for="welcomeOutText" class="form-label">Teks Pesan Keluar</label>
                                            <textarea class="form-control" name="welcomeOutText" id="welcomeOutText"
                                                rows="3"><%= settings.welcomeOutText || '' %></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex justify-content-end">
                                <button type="submit" class="btn btn-primary px-4">Simpan Perubahan</button>
                            </div>
                        </form>
            </div>
            <%- include('partials/footer') %>